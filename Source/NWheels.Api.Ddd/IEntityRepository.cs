using System;
using System.Linq;

namespace NWheels.Api.Ddd
{
    public interface IEntityRepository<T>
        where T : class
    {
        IQueryable<T> AsQueryable();

        //-----------------------------------------------------------------------------------------------------------------------------------------------------

        void Insert(T entity);

        //-----------------------------------------------------------------------------------------------------------------------------------------------------

        T New(Action<T> initializer = null);

        //-----------------------------------------------------------------------------------------------------------------------------------------------------

        TInheritor New<TInheritor>(Action<TInheritor> initializer = null) where TInheritor : T;

        //-----------------------------------------------------------------------------------------------------------------------------------------------------

        T New(Type inheritorType, Action<T> initializer = null);
    }
}
